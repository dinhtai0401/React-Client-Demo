{"ast":null,"code":"import _classCallCheck from\"/Users/tainguyen/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tainguyen/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/tainguyen/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/tainguyen/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/tainguyen/Desktop/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{BrowserRouter as Router,Route,Link}from\"react-router-dom\";import axios from'axios';import constants from'../constants.json';import Auth from'./Auth';var PostInfo=/*#__PURE__*/function(_Component){_inherits(PostInfo,_Component);function PostInfo(props){var _this;_classCallCheck(this,PostInfo);_this=_possibleConstructorReturn(this,_getPrototypeOf(PostInfo).call(this,props));_this.handleChange=function(e){_this.setState({search:e.target.value.substr(0,20)});};_this.selectedValueHandler=function(e){_this.setState({selectedValue:e.target.value});};_this.handleOnDelete=function(id){console.log(typeof id);console.log(typeof _this.props.user);console.log(typeof _this.props.userInfo);if(_this.props.authenticated||_this.props.isAuthenticated){if(id==_this.props.user){axios.delete(\"http://localhost:4000/post/\"+id).then(function(response){console.log(response);}).catch(function(error){console.log(error);});var deleted_array_of_post=_this.state.post.filter(function(i){return i.id!=id;});console.log(deleted_array_of_post);_this.setState({post:deleted_array_of_post});}else if(id==_this.props.userInfo){axios.delete(\"http://localhost:4000/post/\"+id).then(function(response){console.log(response);}).catch(function(error){console.log(error);});var _deleted_array_of_post=_this.state.post.filter(function(i){return i.id!=id;});console.log(_deleted_array_of_post);_this.setState({post:_deleted_array_of_post});}}};_this.handleSignInClick=function(){// Authenticate using via passport api in the backend\n// Open Twitter login page\n// Upon successful login, a cookie session will be stored in the client\nwindow.open(\"http://localhost:4000/auth/google\",\"_self\");};_this.handleLogoutClick=function(){// Logout using Twitter passport api\n// Set authenticated state to false in the HomePage\nwindow.open(\"http://localhost:4000/auth/logout\",\"_self\");_this.setState({authenticated:false});};_this.state={error:null,//authenticated: false,\npost:[],search:'',selectedValue:'category',options:[{name:'Category',value:'category'},{name:'Location',value:'location'},{name:'Date Of Posting',value:'dateOfPosting'}]};return _this;}_createClass(PostInfo,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(constants.baseAddress+\"/post\").then(function(res){console.log(res.data);_this2.setState({post:res.data});});}},{key:\"render\",value:function render(){var _this3=this;var authenticated=this.props.authenticated;console.log(this.props.authenticated);var FilterPost;if(this.state.selectedValue==='category'){FilterPost=this.state.post.filter(function(i){return i.category.toLowerCase().indexOf(_this3.state.search.toLowerCase())!==-1;});}else if(this.state.selectedValue==='location'){FilterPost=this.state.post.filter(function(i){return i.location.toLowerCase().indexOf(_this3.state.search.toLowerCase())!==-1;});}else if(this.state.selectedValue==='dateOfPosting'){FilterPost=this.state.post.filter(function(i){return i.dataOfPosting.toLowerCase().indexOf(_this3.state.search.toLowerCase())!==-1;});}return React.createElement(\"div\",null,React.createElement(\"h1\",null,this.props.user),authenticated?React.createElement(\"button\",{onClick:this.handleLogoutClick},\"Logout\"):React.createElement(\"button\",{onClick:this.handleSignInClick},\"Gmail+\"),React.createElement(\"div\",null,!authenticated?React.createElement(\"h3\",null,\"Welcome!\"):React.createElement(\"div\",null,React.createElement(\"h3\",null,\"You have login succcessfully!\"))),React.createElement(\"button\",null,React.createElement(Link,{to:'/login'},\"Log in\")),React.createElement(\"button\",{onClick:this.props.onLogOut},\"Logout\"),React.createElement(\"button\",null,React.createElement(Link,{to:'/postview'},\"Post View\")),React.createElement(\"div\",null,React.createElement(\"select\",{id:\"searchSelect\",name:\"searchSelect\",onChange:this.selectedValueHandler.bind(this)},this.state.options.map(function(item){return React.createElement(\"option\",{key:item.value,value:item.value},item.name);})),React.createElement(\"input\",{type:\"text\",value:this.state.search,onChange:this.handleChange.bind(this)})),React.createElement(\"div\",null,FilterPost.map(function(i){return React.createElement(\"div\",{key:i.id},React.createElement(\"div\",null,i.image.map(function(url){return React.createElement(\"img\",{src:url,style:{width:\"8%\"}});})),React.createElement(\"div\",null,i.title),React.createElement(\"div\",null,i.description),React.createElement(\"div\",null,i.category),React.createElement(\"div\",null,i.location),React.createElement(\"div\",null,i.price),React.createElement(\"div\",null,i.dataOfPosting),React.createElement(\"div\",null,i.delivery),React.createElement(\"div\",null,i.SellerOfName),React.createElement(\"div\",null,React.createElement(\"button\",null,\"Change\"),React.createElement(\"button\",{onClick:_this3.handleOnDelete.bind(_this3,i.id)},\"Delete\")));})));}}]);return PostInfo;}(Component);export{PostInfo as default};","map":{"version":3,"sources":["/Users/tainguyen/Desktop/my-app/src/components/PostInfo.js"],"names":["React","Component","BrowserRouter","Router","Route","Link","axios","constants","Auth","PostInfo","props","handleChange","e","setState","search","target","value","substr","selectedValueHandler","selectedValue","handleOnDelete","id","console","log","user","userInfo","authenticated","isAuthenticated","delete","then","response","catch","error","deleted_array_of_post","state","post","filter","i","handleSignInClick","window","open","handleLogoutClick","options","name","get","baseAddress","res","data","FilterPost","category","toLowerCase","indexOf","location","dataOfPosting","onLogOut","bind","map","item","image","url","width","title","description","price","delivery","SellerOfName"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport axios from 'axios';\nimport constants from '../constants.json';\nimport Auth from './Auth';\n\n\nexport default class PostInfo extends Component {\n\n\n  constructor(props)\n  {\n    super(props);\n    this.state = {\n      error: null,\n      //authenticated: false,\n      post: [],\n      search: '',\n      selectedValue: 'category',\n      options: [\n        {\n          name: 'Category',\n          value: 'category',\n        },\n        {\n          name: 'Location',\n          value: 'location',\n        },\n        {\n          name: 'Date Of Posting',\n          value: 'dateOfPosting',\n        }\n      ]\n    };\n  }  \n\n \n    handleChange = (e) => {\n      this.setState({search: e.target.value.substr(0,20)});\n    }\n\n    selectedValueHandler = (e) => {\n    this.setState({selectedValue: e.target.value});\n    }\n\n\n\n\n\n    handleOnDelete = (id) =>{\n      console.log(typeof(id));\n      console.log(typeof(this.props.user));\n      console.log(typeof(this.props.userInfo))\n      if(this.props.authenticated || this.props.isAuthenticated){\n        if(id == this.props.user){\n          axios.delete(\"http://localhost:4000/post/\" + id\n          ).then(function (response) {\n              console.log(response);\n          })\n              .catch(function (error) {\n                  console.log(error);\n              });\n          let deleted_array_of_post = this.state.post.filter(i => i.id != id);\n          console.log(deleted_array_of_post);\n          this.setState({post : deleted_array_of_post});  \n        }\n        else if(id == this.props.userInfo){\n          axios.delete(\"http://localhost:4000/post/\" + id\n          ).then(function (response) {\n              console.log(response);\n          })\n              .catch(function (error) {\n                  console.log(error);\n              });\n          let deleted_array_of_post = this.state.post.filter(i => i.id != id);\n          console.log(deleted_array_of_post);\n          this.setState({post : deleted_array_of_post});  \n        }\n        }\n    }\n\n    componentDidMount() {\n      axios.get(constants.baseAddress + \"/post\")\n      .then(res => {\n        console.log(res.data);\n        this.setState({ post: res.data });\n      })\n    };\n\n    /*componentDidMount() {\n      axios.get(constants.baseAddress + \"/post\")\n      .then(res => {\n        console.log(res.data);\n        this.setState({ post: res.data });\n      })\n      .catch(error => console.log(error));\n      // Fetch does not send cookies. So you should add credentials: 'include'\n      fetch(\"http://localhost:4000/auth/login/success\", {\n        method: \"GET\",\n        credentials: \"include\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Credentials\": true\n        }\n      })\n        .then(response => {\n          if (response.status === 200) return response.json();\n          throw new Error(\"failed to authenticate user\");\n        })\n        .then(responseJson => {\n          this.setState({\n            authenticated: true,\n            user: responseJson.user,\n          });\n        })\n        .catch(error => {\n          this.setState({\n            authenticated: false,\n            error: \"Failed to authenticate user\"\n          });\n        });\n    }*/\n  \n    handleSignInClick = () => {\n      // Authenticate using via passport api in the backend\n      // Open Twitter login page\n      // Upon successful login, a cookie session will be stored in the client\n      window.open(\"http://localhost:4000/auth/google\", \"_self\");\n    };\n  \n    handleLogoutClick = () => {\n      // Logout using Twitter passport api\n      // Set authenticated state to false in the HomePage\n      window.open(\"http://localhost:4000/auth/logout\", \"_self\");\n      this.setState({ authenticated: false });\n    };\n\n\n  render() {\n    var { authenticated } = this.props;\n    console.log(this.props.authenticated);\n        let FilterPost;\n        if(this.state.selectedValue === 'category'){\n          FilterPost = this.state.post.filter(i => i.category.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1)  \n        }else if (this.state.selectedValue === 'location') {\n        FilterPost = this.state.post.filter(i => i.location.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1)\n        } else if (this.state.selectedValue === 'dateOfPosting') {\n        FilterPost = this.state.post.filter(i => i.dataOfPosting.toLowerCase().indexOf(this.state.search.toLowerCase()) !== -1)\n        }\n    return (\n      <div>\n        <h1>{this.props.user}</h1>\n        {authenticated ? (\n          <button onClick={this.handleLogoutClick}>Logout</button>\n        ) : (\n          <button onClick={this.handleSignInClick}>Gmail+</button>\n        )}\n        <div>\n          {!authenticated ? (\n            <h3>Welcome!</h3>\n          ) : (\n            <div>\n              <h3>You have login succcessfully!</h3>\n            </div>\n          )}\n        </div>\n        <button><Link to={'/login'}>Log in</Link></button>\n        <button onClick={this.props.onLogOut}>Logout</button>\n        <button><Link to={'/postview'}>Post View</Link></button>\n        <div>\n        <select\n        id=\"searchSelect\"\n        name=\"searchSelect\"\n        onChange={this.selectedValueHandler.bind(this)} >\n        {this.state.options.map(item => (\n          <option key={item.value} value={item.value}>\n            {item.name}\n          </option>\n        ))}\n        </select>\n        <input type='text'\n        value={this.state.search}\n        onChange={this.handleChange.bind(this)} />\n        </div>\n        <div>\n        {FilterPost.map(i => \n            <div key={i.id}>\n               <div>{i.image.map(url => <img src={url} style={{width: \"8%\"}}></img>)}</div>\n               <div>{i.title}</div>\n               <div>{i.description}</div>\n               <div>{i.category}</div>\n               <div>{i.location}</div>\n               <div>{i.price}</div>\n               <div>{i.dataOfPosting}</div>\n               <div>{i.delivery}</div>\n               <div>{i.SellerOfName}</div>\n               <div>\n                 <button>Change</button>\n                 <button onClick={this.handleOnDelete.bind(this, i.id)}>Delete</button>\n               </div>\n            </div>\n        )}\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}