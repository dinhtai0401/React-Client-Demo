{"ast":null,"code":"var _jsxFileName = \"/Users/tainguyen/Desktop/my-app/src/components/Homepage.js\";\nimport Header from \"./Header\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nexport default class HomePage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {},\n      error: null,\n      authenticated: false\n    };\n\n    this._handleNotAuthenticated = () => {\n      this.setState({\n        authenticated: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    // Fetch does not send cookies. So you should add credentials: 'include'\n    fetch(\"http://localhost:4000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(response => {\n      if (response.status === 200) return response.json();\n      throw new Error(\"failed to authenticate user\");\n    }).then(responseJson => {\n      this.setState({\n        authenticated: true,\n        user: responseJson.user\n      });\n    }).catch(error => {\n      this.setState({\n        authenticated: false,\n        error: \"Failed to authenticate user\"\n      });\n    });\n  }\n\n  render() {\n    const {\n      authenticated\n    } = this.state;\n    console.log(this.state.user);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(Header, {\n      authenticated: authenticated,\n      handleNotAuthenticated: this._handleNotAuthenticated,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, !authenticated ? React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"Welcome!\") : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"You have login succcessfully!\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/tainguyen/Desktop/my-app/src/components/Homepage.js"],"names":["Header","PropTypes","React","Component","HomePage","state","user","error","authenticated","_handleNotAuthenticated","setState","componentDidMount","fetch","method","credentials","headers","Accept","then","response","status","json","Error","responseJson","catch","render","console","log"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,UAAnB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,eAAe,MAAMC,QAAN,SAAuBD,SAAvB,CAAiC;AAAA;AAAA;AAAA,SAG9CE,KAH8C,GAGtC;AACNC,MAAAA,IAAI,EAAE,EADA;AAENC,MAAAA,KAAK,EAAE,IAFD;AAGNC,MAAAA,aAAa,EAAE;AAHT,KAHsC;;AAAA,SA4D9CC,uBA5D8C,GA4DpB,MAAM;AAC9B,WAAKC,QAAL,CAAc;AAAEF,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACD,KA9D6C;AAAA;;AAS9CG,EAAAA,iBAAiB,GAAG;AAClB;AACAC,IAAAA,KAAK,CAAC,0CAAD,EAA6C;AAChDC,MAAAA,MAAM,EAAE,KADwC;AAEhDC,MAAAA,WAAW,EAAE,SAFmC;AAGhDC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB,kBAFT;AAGP,4CAAoC;AAH7B;AAHuC,KAA7C,CAAL,CASGC,IATH,CASQC,QAAQ,IAAI;AAChB,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B,OAAOD,QAAQ,CAACE,IAAT,EAAP;AAC7B,YAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD,KAZH,EAaGJ,IAbH,CAaQK,YAAY,IAAI;AACpB,WAAKZ,QAAL,CAAc;AACZF,QAAAA,aAAa,EAAE,IADH;AAEZF,QAAAA,IAAI,EAAEgB,YAAY,CAAChB;AAFP,OAAd;AAID,KAlBH,EAmBGiB,KAnBH,CAmBShB,KAAK,IAAI;AACd,WAAKG,QAAL,CAAc;AACZF,QAAAA,aAAa,EAAE,KADH;AAEZD,QAAAA,KAAK,EAAE;AAFK,OAAd;AAID,KAxBH;AAyBD;;AAEDiB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEhB,MAAAA;AAAF,QAAoB,KAAKH,KAA/B;AACAoB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKrB,KAAL,CAAWC,IAAvB;AACA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,aAAa,EAAEE,aADjB;AAEE,MAAA,sBAAsB,EAAE,KAAKC,uBAF/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAACD,aAAD,GACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,GAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uCADF,CAJJ,CALF,CADF;AAiBD;;AA1D6C","sourcesContent":["import Header from \"./Header\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\n\nexport default class HomePage extends Component {\n\n\n  state = {\n    user: {},\n    error: null,\n    authenticated: false\n  };\n\n  componentDidMount() {\n    // Fetch does not send cookies. So you should add credentials: 'include'\n    fetch(\"http://localhost:4000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    })\n      .then(response => {\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed to authenticate user\");\n      })\n      .then(responseJson => {\n        this.setState({\n          authenticated: true,\n          user: responseJson.user\n        });\n      })\n      .catch(error => {\n        this.setState({\n          authenticated: false,\n          error: \"Failed to authenticate user\"\n        });\n      });\n  }\n\n  render() {\n    const { authenticated } = this.state;\n    console.log(this.state.user);\n    return (\n      <div>\n        <Header\n          authenticated={authenticated}\n          handleNotAuthenticated={this._handleNotAuthenticated}\n        />\n        <div>\n          {!authenticated ? (\n            <h1>Welcome!</h1>\n          ) : (\n            <div>\n              <h1>You have login succcessfully!</h1>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  _handleNotAuthenticated = () => {\n    this.setState({ authenticated: false });\n  };\n}"]},"metadata":{},"sourceType":"module"}