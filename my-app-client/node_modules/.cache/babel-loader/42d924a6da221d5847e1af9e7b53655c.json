{"ast":null,"code":"var _jsxFileName = \"/Users/tainguyen/Desktop/my-app/src/components/Homepage.js\";\nimport Header from \"./Header\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport PostInfo from \"./PostInfo\";\nimport { Link } from \"react-router-dom\";\nexport default class HomePage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      axios.get(constants.baseAddress + \"/post\").then(res => {\n        console.log(res.data);\n        this.setState({\n          post: res.data\n        });\n      }).catch(error => console.log(error));\n    };\n\n    this._handleSignInClick = () => {\n      // Authenticate using via passport api in the backend\n      // Open Twitter login page\n      // Upon successful login, a cookie session will be stored in the client\n      window.open(\"http://localhost:4000/auth/google\", \"_self\");\n    };\n\n    this._handleLogoutClick = () => {\n      // Logout using Twitter passport api\n      // Set authenticated state to false in the HomePage\n      window.open(\"http://localhost:4000/auth/logout\", \"_self\");\n      this.setState({\n        authenticated: false\n      });\n    };\n\n    this.state = {\n      user: {},\n      error: null,\n      authenticated: false,\n      post: []\n    };\n  }\n\n  componentDidMount() {\n    // Fetch does not send cookies. So you should add credentials: 'include'\n    fetch(\"http://localhost:4000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    }).then(response => {\n      if (response.status === 200) return response.json();\n      throw new Error(\"failed to authenticate user\");\n    }).then(responseJson => {\n      this.setState({\n        authenticated: true,\n        user: responseJson.user\n      });\n    }).catch(error => {\n      this.setState({\n        authenticated: false,\n        error: \"Failed to authenticate user\"\n      });\n    });\n  }\n\n  render() {\n    const {\n      authenticated\n    } = this.state;\n    console.log(this.state.authenticated);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"menu\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Home\")), authenticated ? React.createElement(\"li\", {\n      onClick: this._handleLogoutClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, \"Logout\") : React.createElement(\"li\", {\n      onClick: this._handleSignInClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Login\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, !authenticated ? React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Welcome!\") : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"You have login succcessfully!\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/tainguyen/Desktop/my-app/src/components/Homepage.js"],"names":["Header","PropTypes","React","Component","PostInfo","Link","HomePage","constructor","props","componentDidMount","axios","get","constants","baseAddress","then","res","console","log","data","setState","post","catch","error","_handleSignInClick","window","open","_handleLogoutClick","authenticated","state","user","fetch","method","credentials","headers","Accept","response","status","json","Error","responseJson","render"],"mappings":"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","sourcesContent":["import Header from \"./Header\";\nimport PropTypes from \"prop-types\";\nimport React, { Component } from \"react\";\nimport PostInfo from \"./PostInfo\"\nimport { Link } from \"react-router-dom\";\nexport default class HomePage extends Component {\n\n    constructor(props)\n  {\n    super(props);\n    this.state = {\n      user: {},\n      error: null,\n      authenticated: false,\n      post: [],\n    };\n  } \n\n  componentDidMount = () => {\n    axios.get(constants.baseAddress + \"/post\")\n      .then(res => {\n        console.log(res.data);\n        this.setState({ post: res.data });\n      })\n      .catch(error => console.log(error));\n  }\n\n  componentDidMount() {\n    // Fetch does not send cookies. So you should add credentials: 'include'\n    fetch(\"http://localhost:4000/auth/login/success\", {\n      method: \"GET\",\n      credentials: \"include\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        \"Access-Control-Allow-Credentials\": true\n      }\n    })\n      .then(response => {\n        if (response.status === 200) return response.json();\n        throw new Error(\"failed to authenticate user\");\n      })\n      .then(responseJson => {\n        this.setState({\n          authenticated: true,\n          user: responseJson.user\n        });\n      })\n      .catch(error => {\n        this.setState({\n          authenticated: false,\n          error: \"Failed to authenticate user\"\n        });\n      });\n  }\n\n  _handleSignInClick = () => {\n    // Authenticate using via passport api in the backend\n    // Open Twitter login page\n    // Upon successful login, a cookie session will be stored in the client\n    window.open(\"http://localhost:4000/auth/google\", \"_self\");\n  };\n\n  _handleLogoutClick = () => {\n    // Logout using Twitter passport api\n    // Set authenticated state to false in the HomePage\n    window.open(\"http://localhost:4000/auth/logout\", \"_self\");\n    this.setState({ authenticated: false });\n  };\n\n  render() {\n    const { authenticated } = this.state;\n    console.log(this.state.authenticated);\n    return (\n      <div>\n        <ul className=\"menu\">\n        <li>\n          <Link to=\"/\">Home</Link>\n        </li>\n        {authenticated ? (\n          <li onClick={this._handleLogoutClick}>Logout</li>\n        ) : (\n          <li onClick={this._handleSignInClick}>Login</li>\n        )}\n        </ul>\n        <div>\n          {!authenticated ? (\n            <h1>Welcome!</h1>\n          ) : (\n            <div>\n              <h1>You have login succcessfully!</h1>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n \n\n}\n\n\n"]},"metadata":{},"sourceType":"module"}